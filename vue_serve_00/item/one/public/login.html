<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <link rel="stylesheet" href="./css/comm.css">
  <link rel="stylesheet" href="./css/login.css">
</head>
<body>
  <div class="bg-ground">
    <div class="Index">
      <table>  
        <tr>
          <th>登录</th>
          <th class="updown"><a href="http://127.0.0.1:8080/register.html" target="_self" >新用户注册</a></th>
        </tr>
        <tr style="text-align:center">
          <th class="down uptwo" id="misstake" colspan="2">账号密码错误!</th>
        </tr>
        <tr>
          <th>用户名：</th>
          <th><input type="text" id="uname"></th>
          <th class="up"><span >请输入用户名</span></th>
        </tr>
        <tr>
          <th>密码：</th>
          <th><input type="text" id="upwd"></th>
          <th class="up"><span >请输入密码</span></th>
        </tr>
        <tr>
          <th><input type="checkbox">自动登录</th>
          <th style="text-align:right">忘记密码?</th>
        </tr>
        <tr style="text-align:center">
          <th colspan="2"><button onclick="login()">登录</button></th>
        </tr>
      </table>
    </div>
  </div>
  <script src="./jquery-3.1.1/jquery-1.11.3.js"></script>
  <script>
   
    (function(){
       $("#uname").focus(function(){
      $(this).parent().next().removeClass("up");
    })
    .blur(function(){
      $(this).parent().next().addClass("up");
    })
    $("#upwd").focus(function(){
      $(this).parent().next().removeClass("up");
    })
    .blur(function(){
      $(this).parent().next().addClass("up");
    })
    })()
    
   function login(){
				//获取用户名密码
				var u_name=uname.value;
				var u_pwd=upwd.value;
				//1.创建xhr异步对象
				var xhr=new XMLHttpRequest();
				//4.监听获取响应数据
				xhr.onreadystatechange=function(){
					if(xhr.readyState==4&&xhr.status==200){
            var result=xhr.responseText;
            if(result==1){
              location.href="index.html";
            }else{
              console.log($("#misstake"));
              $("#misstake").removeClass("uptwo");
            }
					}
				}
				//2.打开连接，创建请求
				xhr.open("post","http://127.0.0.1:8080/pro/login",true);
				//3.发送请求
				//3.1创建请求主题
				var formdata="uname="+u_name+"&upwd="+u_pwd;
				//3.2设置请求消息头
				xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
				xhr.send(formdata);
      }
  </script>
</body>
  <footer>
    <iframe class="my_footer" src="footer.html" frameborder="0" scrolling="no"></iframe>
  </footer>
</html>